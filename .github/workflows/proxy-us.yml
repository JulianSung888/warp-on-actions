name: WARP Proxy US

on:
  workflow_dispatch:

jobs:
  warp:
    runs-on: ubuntu-latest
    env:
      REGION: us
      WARP_PLUS: "false"
      TUNNEL_TOKEN: eyJhIjoiZTU3ODMxNTFlMTY3NjkxNTgyYjI1Y2RhYTJkYWJhOTkiLCJ0IjoiOGZjZTMyZDAtZWZmZC00ZGRhLWI5YTUtOTE0YThlMWQ2ZDNlIiwicyI6Ill6Um1NbVkyWVRrdFpEQXdNQzAwTUdKakxXRmlZV010TnpabU1EZGpObVExWlRJMCJ9

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Run WARP (wireguard mode)
        uses: fscarmen/warp-on-actions@main
        with:
          tunnel-token: ${{ env.TUNNEL_TOKEN }}
          region: ${{ env.REGION }}
          warp-plus: ${{ env.WARP_PLUS }}

      - name: 查看出口 IP (詳細格式)
        run: |
          sudo apt update && sudo apt install -y jq
          echo -e "\n🔍 當前出口 IP 資訊（美國）：" && curl -s ipinfo.io | jq
